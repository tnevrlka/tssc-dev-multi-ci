#!/bin/bash
SCRIPTDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" > /dev/null 2>&1 && pwd)"

ENV="MY_JENKINS_SERVER MY_JENKINS_USER MY_JENKINS_TOKEN COSIGN_SECRET_PASSWORD COSIGN_SECRET_KEY COSIGN_PUBLIC_KEY "

ENV+=" ACS__API_TOKEN ACS__CENTRAL_ENDPOINT GITOPS_AUTH_PASSWORD "
source "$SCRIPTDIR/../rhtap/verify-deps-exist" "$ENV" "java "

bash "$SCRIPTDIR/jenkins-create-secret" ROX_API_TOKEN "$ACS__API_TOKEN"
bash "$SCRIPTDIR/jenkins-create-variable" ROX_CENTRAL_ENDPOINT "$ACS__CENTRAL_ENDPOINT"

bash "$SCRIPTDIR/jenkins-create-secret" GITOPS_AUTH_PASSWORD "$GITOPS_AUTH_PASSWORD"

bash "$SCRIPTDIR/jenkins-create-secret" COSIGN_SECRET_PASSWORD "$COSIGN_SECRET_PASSWORD"
bash "$SCRIPTDIR/jenkins-create-secret" COSIGN_SECRET_KEY "$COSIGN_SECRET_KEY"
bash "$SCRIPTDIR/jenkins-create-variable" COSIGN_PUBLIC_KEY "$COSIGN_PUBLIC_KEY"

bash "$SCRIPTDIR/jenkins-create-variable" TRUSTIFICATION_BOMBASTIC_API_URL "$TRUSTIFICATION_BOMBASTIC_API_URL"
bash "$SCRIPTDIR/jenkins-create-variable" TRUSTIFICATION_OIDC_ISSUER_URL "$TRUSTIFICATION_OIDC_ISSUER_URL"
bash "$SCRIPTDIR/jenkins-create-variable" TRUSTIFICATION_OIDC_CLIENT_ID "$TRUSTIFICATION_OIDC_CLIENT_ID"
bash "$SCRIPTDIR/jenkins-create-secret" TRUSTIFICATION_OIDC_CLIENT_SECRET "$TRUSTIFICATION_OIDC_CLIENT_SECRET"
bash "$SCRIPTDIR/jenkins-create-variable" TRUSTIFICATION_SUPPORTED_CYCLONEDX_VERSION "$TRUSTIFICATION_SUPPORTED_CYCLONEDX_VERSION"

bash "$SCRIPTDIR/jenkins-create-user-password" QUAY_IO_CREDS "$MY_QUAY_USER" "$MY_QUAY_PW"
